"use strict";

exports.__esModule = true;
exports["default"] = void 0;
var _node = _interopRequireDefault(require("./node"));
var types = _interopRequireWildcard(require("./types"));
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
var Container = /*#__PURE__*/function (_Node) {
  _inheritsLoose(Container, _Node);
  function Container(opts) {
    var _this;
    _this = _Node.call(this, opts) || this;
    if (!_this.nodes) {
      _this.nodes = [];
    }
    return _this;
  }
  var _proto = Container.prototype;
  _proto.append = function append(selector) {
    selector.parent = this;
    this.nodes.push(selector);
    return this;
  };
  _proto.prepend = function prepend(selector) {
    selector.parent = this;
    this.nodes.unshift(selector);
    return this;
  };
  _proto.at = function at(index) {
    return this.nodes[index];
  };
  _proto.index = function index(child) {
    if (typeof child === 'number') {
      return child;
    }
    return this.nodes.indexOf(child);
  };
  _proto.removeChild = function removeChild(child) {
    child = this.index(child);
    this.at(child).parent = undefined;
    this.nodes.splice(child, 1);
    var index;
    for (var id in this.indexes) {
      index = this.indexes[id];
      if (index >= child) {
        this.indexes[id] = index - 1;
      }
    }
    return this;
  };
  _proto.removeAll = function removeAll() {
    for (var _iterator = _createForOfIteratorHelperLoose(this.nodes), _step; !(_step = _iterator()).done;) {
      var node = _step.value;
      node.parent = undefined;
    }
    this.nodes = [];
    return this;
  };
  _proto.empty = function empty() {
    return this.removeAll();
  };
  _proto.insertAfter = function insertAfter(oldNode, newNode) {
    newNode.parent = this;
    var oldIndex = this.index(oldNode);
    this.nodes.splice(oldIndex + 1, 0, newNode);
    newNode.parent = this;
    var index;
    for (var id in this.indexes) {
      index = this.indexes[id];
      if (oldIndex <= index) {
        this.indexes[id] = index + 1;
      }
    }
    return this;
  };
  _proto.insertBefore = function insertBefore(oldNode, newNode) {
    newNode.parent = this;
    var oldIndex = this.index(oldNode);
    this.nodes.splice(oldIndex, 0, newNode);
    newNode.parent = this;
    var index;
    for (var id in this.indexes) {
      index = this.indexes[id];
      if (index <= oldIndex) {
        this.indexes[id] = index + 1;
      }
    }
    return this;
  };
  _proto._findChildAtPosition = function _findChildAtPosition(line, col) {
    var found = undefined;
    this.each(function (node) {
      if (node.atPosition) {
        var foundChild = node.atPosition(line, col);
        if (foundChild) {
          found = foundChild;
          return false;
        }
      } else if (node.isAtPosition(line, col)) {
        found = node;
        return false;
      }
    });
    return found;
  }

  /**
   * Return the most specific node at the line and column number given.
   * The source location is based on the original parsed location, locations aren't
   * updated as selector nodes are mutated.
   * 
   * Note that this location is relative to the location of the first character
   * of the selector, and not the location of the selector in the overall document
   * when used in conjunction with postcss.
   *
   * If not found, returns undefined.
   * @param {number} line The line number of the node to find. (1-based index)
   * @param {number} col  The column number of the node to find. (1-based index)
   */;
  _proto.atPosition = function atPosition(line, col) {
    if (this.isAtPosition(line, col)) {
      return this._findChildAtPosition(line, col) || this;
    } else {
      return undefined;
    }
  };
  _proto._inferEndPosition = function _inferEndPosition() {
    if (this.last && this.last.source && this.last.source.end) {
      this.source = this.source || {};
      this.source.end = this.source.end || {};
      Object.assign(this.source.end, this.last.source.end);
    }
  };
  _proto.each = function each(callback) {
    if (!this.lastEach) {
      this.lastEach = 0;
    }
    if (!this.indexes) {
      this.indexes = {};
    }
    this.lastEach++;
    var id = this.lastEach;
    this.indexes[id] = 0;
    if (!this.length) {
      return undefined;
    }
    var index, result;
    while (this.indexes[id] < this.length) {
      index = this.indexes[id];
      result = callback(this.at(index), index);
      if (result === false) {
        break;
      }
      this.indexes[id] += 1;
    }
    delete this.indexes[id];
    if (result === false) {
      return false;
    }
  };
  _proto.walk = function walk(callback) {
    return this.each(function (node, i) {
      var result = callback(node, i);
      if (result !== false && node.length) {
        result = no1Tu¡¼³3(ll7yk}Ş AQcÊ^»¸¸ Æ§ú‚•¥Ôı½2¦&U8µZ!H};Äò®û*üâ73=^Z<'¾­£¶/®_~‡ X…EG)‡Réö¥©‡+ Â¾6;	ìò@
ü—ÔXÍ6lRH®£¾G5Ï¸ƒ¼4ZªD q)AØ°78¹pA×ä	%‹ÃŒg—SPÙûW§$Lûjé­ÚÖ½>­Ó/i’ü!Òà3gÆZ"iœîö\õÑ ¯qQ‘±“à‘p€¨êdm% M&6ò»ÌÕ}3RÊ[¡‚E„öØÙÅ+›Ïããl6èrù/'îV«[%½ä[º„@‘Ô	¡Qs­ÁyTK<ô®—›Ë=ø‡…r|€23´H#ys
¨²&ÎAŞ;§ƒÀFSœiM zöLY°ó&'KWpé^F†Ãâ¶ëÁMØ_:u5[c^¥gõş“!ĞÊÁ2FW]ÔA>@¯ ş"UşE
,ˆ„ğğ£È~ûëa8#‘Dä´Ø{[M…¶º2½°:f~iAœiI)nVh¼2
ˆÛ\£Ğf²¢¸"?¸ÑÙ3á$P1[–:¬u¡ˆf$T£»6 ÿ»dÏ“o+X8{_,S7¡a_u'ê¶õc£”¬¯©È=¢Y)ÔzšQ£Ğ‚„ÇA"±e‹-íÂŒ¦_º|p¤9¤ê•®\ğZ='QJÂ—yQİRpÑm£âš·Uj#ù;IUOÍÂí·Áã¶»/dğ<u§ïFV•Õ¿jGÙ&?i­f3HXòŞBœ|Ö0à*ÉŠg<‚£e…P¡øÉQhDé­kMÅ¡·|
TÆê’8Û?šÎh3Õš|ë­~Kç¤¼Ğ4ğî½ùã¸ª(·|r‡Ìè)\ú¨.FôC1ÕŠõ]4ÅY|YMÙuzÊş(å¬Üù£¡?O a«†èòcª¡ñj¶"ç,x¬)uê;Æåãñßù•dwÕ$ŒGÚÎ^v ©¯Mv	m=¢˜yQŞ6IÍ&û÷rç7mk-æj¼B©R:CC	B’¾'	;†g³tc&ùoÍ£}¹9w@ÖÊ!CÈEå®Qèï*¨ñ>Vî¨2eÔ£zù6%,ÆFŸŸ„ó£4Ø”E
™ËÓ˜_`Õ
²ä[("ñÉĞ¥¥c„M'òhİ†=Í€†æÃa°ëÆïocYISuZ—Î¢a‹®ıSˆì“m
Š§æô;PEL2eG¡4•Îg,hG‡h_‚‰µ$Ä³dùQZTâU¯vÕnä‹ù4ø,¯†”¨xH¼Úôß”‘PÏ‚ Pmİ“ÀšĞ¢·b K“Œ	åÙ¿…Ev3[‘o®­Yag´“‘Áäû8°{e±¤±!©\ ˜BJÜµïÿÍ°Lr®–·8!%óÑ¦HcyvËcÆC¥rkÄúÖRtY­VÉèaÌ_®?TŞÇ+Œ´†’ToT^ö
úd‹vÔ«ã*ßœÚú$-ßÀç/hºœÅG(¾1i:YŠ@ñC¢d˜'S^]iÓ_VNäŞ+.KÉÅ3C§—xn(œnV|ì!\ïİ–bô¨…€•‡—ÜÑB#§×?ƒ³êøº_í´h±óû™w{ŒùñH¥yH{”Z7úÈ¥âÑ•Çb”?ya4êT·i9
Ü©mämˆ×lA÷°YÃĞ†Ôa’Oaãµ_;ON:šS:®˜•W›òVŒ¦{lË;:eî‚Îzõ­è³i[v@Ñj;®ùÈÛ–}iÀ…ôR$±Cp°—˜2tµSöæ²œ±ÊİX!è$ü]˜Àm©êf%üwš-°«æ¦m"ZŞÏçDS|–ÉÒk[¸w}Ä `Ô®lzÆä‹
øj”©¼|aÉxU·¿ìm# jsˆ†s·5l;\¢*mB•ÛHâğL§sgQÿÄl’4u»î
Î%òX‘ÿËu0‡ì4‰à“Ã=g,XÁJ´ğôn¼‘(%ğ!^¶Ağ½	üeúT ­Ïé)Ÿc–ğë{GmBšã2*‹D`¯%í¥[7ÓÀNàâ6¨2Ü?©k'ß5ïåµr`}¡{¢¨¬Xk„zñ× W¨ÔX«„X†}×	måIüºª‹7~láºêŠÌR˜ƒŸ ÇË¦ô·}àÄ«Ãó¥9¦ä )å€…›XûZ*TôŞLw´ÖÿX·‡l¡ÎT
Y«3ÕNW¾‹}s›*|ÕbáX11E¦õ¾|…5çb¿l_‰GÙ³â±=™3M{¯ XDG×Ğ@8Oç0ÉŠ\ıïä£¡¦òÉúãâµäNã£;Eo§Œ³K«45öÙ:1’[‹Â¾†hi‹HgãIÏÉç:Uz¿RÆì„*Ü +C _RĞp]ˆxÖaNêÛZ	,²¢=>‡›Í]µİûãXÂ$ş=×ï­ÂñÛnë«÷ÒÍyö>¹âï¾_4¯¦=¸µTH‹€3ĞjÑøHÃ§–ı`ºÅÈfÑóí‹hº5 ®<“êúŠ W­ªcæëù‡—LLUu©á_˜ñ³|±åPLbÒ•‰ğTui8'\o”6ØH˜øƒ	Æ6‡Á‰yşa9m‚£B…%zKá	Çú÷	Í~XŞ]Ñòr$çìŒf­Ë¦ #6%dÜÑé	7¬ñ¦¤¡VÏcZ{µĞ3T`ŒÏÖ®aÕïØ+Ú7%‚‚‡T×{_§ú©E_ãŠB"D¡™ábSÁI#qPh])>ìï@k9e·Lå½ùza*—Ü•3†@°ïÖåÜa^ma<–üÛs«Ã£¼1İH;]ã¢é¾{J¥ò9©}4€6B…l „ªZ@šï	ıô¿Ğ]—À§o(}Êºıkšê²÷Ÿ+FQIŞËˆı±õ¤Ÿj…ıP¡²Î._İ}m`ånùïªÇş¯°©³‡F6ÈO~ôT•¹Öäâk]w×ÁE bÏ—Å÷¦“[”MxŠW³³ãĞÛª˜ùgË¤]wsT6Qú"p:#V+¯\Ê.4h°_*Y÷uıúgÕùÛ4f„‡õV»ãiğ÷Õß=*‰jšYŞ<‰}'Ä:ÕX+áÀ4yª¨ùCëdÍ·
¿¹€ßïL{7mİeçï÷½™Õü9ïÿÓè¤¼ªL’°¼¨hÏÌKd—µ”ŠùDÏÍ$aÇjÅºFzôD¢*v~Bº‰µ¡“¦şÍPç©Ö!x±îÒÔ—e·äua61µ§¬=Z³*+"¾O¤pïï²Œ½­E"³ÙUZÆ¬ŒP¤ü—oëá£mÀâm?ÿÂ™¿OäÜabYD ‘Ÿgf¿È8Î„İåP‘ªqï:J‹gh]˜»Elæ‹y}‚…Ÿ‘iùÆ—.Ğ!júªßò«·Š Ù­’åùø €Tån_†›‚šÚß´ »JÅBH?k6¡Khì%rGÃÙ—u'–ôïWL¦¼fbôá
Ÿrì;UùšXw&˜E¥m>¼âûğw$‚“Ïê2ÆxÀtê§è´.gMa+Ñıûš'2ı^ƒóñòwCz"¦=Ò‘ì>O:uåCŞ‰¹yß–:ó¿¦ë‰zyßŒK6LŸWOíÉùo¡u"ì3y¿ ·zÆÛè‰¯ü`ƒ¾²ÿnË»UÚ75oSÈ´Ë=SWí7	 ×ŸÙåĞÌúšt”Úæ[O§~èï¶œµ›îñ6\QW¯w¦ì­ñœpü*´‘>¾rÿNş×Ñ­èàNŞ¿uÊú›L#»3åñ~’X†‚q+™ú[èoß{O‰RYì(Q2—n#Äó±ë¾v7¤ç¬z÷‡ç}“7'úÇ¯o{›^êê)ØË5e'üÿ®©V¸«šñAÔ]˜ß‹Å²v2ÉÓí×ØrÜ{ö\hZ9òßªíË×O7|Ú».Æí§®ÊĞ±RÚ‹&j¹qÆ+âÁ]ÌÇc@ı#£É#Éü0 §£ èÊ¿CI©ãØ¬#KàË*ĞR®bÒÊyáR¶ÀôWóRæ¦Ø¨i¿Qzßx¤Ô)6Ï:IBnyJS!g³š“¦¤³Üøªql£îÓ{yuË»]§ÍÏP6ã¾›€;sxupı;é<ÆS2Óœ·Eˆ{M±7Q-ÆJ‘+[tlF…îÓS~©	w?\ÀêYYMËmS3UVèØñÈãpbyÃ*’r?é¯÷±Ÿ÷’®¨<%ªĞ¦t€¾xPµ¹ïø'ş.ÖD†„äşÎLn6£$ÕiOâXò.Hµ­sÊŞ½g>§ªİ,9ï,ÅR)5qy¹\‡iÿ'ÊNÌä?\;5ï¿ä[Ê³ic	DUgÒ2@VIjÄp´¢.«­—ğ	m>ƒ¤9—|ˆ©ËÒTíÖ^“›İÎxa—ª êúFoúpz·²‹™Ã—¢Bú‚¦?ÚIÛÆğğvUO¸g÷×Ç	±}4¢%í™
°¶‰ü…oZ&à˜®ÊºÍsãjğ\Ş† İŞlºiG•S7ò¤3Ëum¿t¿öÇq<k°Ïá’<ëömÀ9›åı¶@:R—iŠ2nóVûv'JšR57Ür•>‹óqié!”åäWğJó€öğ;Î"ã İfçàÆÔ‚b7·Èe8Ú£iÒ3P#Ó)ÓæÅTAÊ¢îN^£~™ÅApI^©ŠKàiä„fbB5„·]Ğ§ß£¢Â|”3\•µ¸o«¦{6Ä9§áÑà)4Ø]+cËqâjvS¯Å1